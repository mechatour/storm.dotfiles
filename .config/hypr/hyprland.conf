#
# Zane's hyprland config - assumes a KDE base - Storm theme
#
#
# This config depends on the following:
#
# .config/hypr
# .config/waybar
# .config/rofi
# .config/dunst
# .config/swaylock
# .config/swayidle
# .config/kitty
# .config/Kvantum
#
# polkit-kde-authentication-agent-1
# swaybg
# kdeconnect
# mako
# waybar
# wl-paste
# cliphist
# swayidle
# swaylock
# kitty
# firefox
# Thunderbird
# Dolphin
# qt5ct
# nwg-look
# nm-connection-editor
# rofi-wayland
# hyprshot
# Wireguard VPNs
# qasmixer
#
# Hack Nerd Font Mono
#

#Monitors
monitor=LVDS-1, 1366x768, 0x0, 1
monitor=DP-1, 1920x1080, 0x0, 1
monitor=HDMI-A-1, 1920x1080, 1920x0, 1

# Environment Variables
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,qt6ct
env = XCURSOR_SIZE,24

# Startup
exec-once = /usr/libexec/kf6/polkit-kde-authentication-agent-1
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP &
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP &
exec-once = hyprctl setcursor Vimix-cursors 24
#exec-once = hyprpm reload -n
exec-once = /usr/bin/swaybg -i ~/.config/swaylock/fedora_wallpaper_storm.png -m fit
exec-once = /usr/bin/mako
exec-once = /usr/bin/waybar
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = ~/.config/hypr/delayed-vpn.sh
exec-once = /usr/libexec/kdeconnectd
exec-once = /usr/bin/kdeconnect-indicator
exec-once = /usr/bin/swayidle -w    #config in .config/swayidle/config

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    vfr = true
}

#cursor {
    #hide_on_key_press = true
#}

# Keyboard and Mouse
input {
    kb_layout = gb
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    mouse_refocus = false

    touchpad {
        natural_scroll = no
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

# Theming & Decoration
general {
    gaps_in = 0
    gaps_out = 0
    col.active_border = rgb(e3e3e7) rgb(878383) 75deg
    col.inactive_border = rgb(111115)
    col.nogroup_border = rgba(878383aa)
    col.nogroup_border_active = rgb(909094) rgb(878383) 90deg
    no_border_on_floating = false
    border_size = 2

    layout = dwindle
}

decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
    blur {
        enabled = no
        size = 2
        passes = 1
        new_optimizations = true
    }

    drop_shadow = no
    shadow_range = 6
    shadow_render_power = 2
    col.shadow = rgba(111116ff)
}


group {
    groupbar {
        col.active = rgb(e3e3e7) rgb(878383) 90deg
        col.inactive = rgba(909094aa)
    }
}

animations {
    enabled = yes
    bezier = bezierVanish, 0.0, 0.92, 0.08, 1.0

    animation = windows, 1, 4, bezierVanish
    animation = windowsOut, 1, 4, bezierVanish
    animation = border, 1, 4, bezierVanish
    animation = borderangle, 1, 4, bezierVanish
    animation = fade, 1, 4, bezierVanish
    animation = workspaces, 1, 4, bezierVanish
}

# Dwindle setup
dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = yes # master switch for pseudotiling. Enabling is
           # bound to mainMod + P in the keybinds section
           # below
    preserve_split = no # you probably want this
}

# Master setup
master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_is_master = true
    mfact = 0.59
}

# Touchscreen gestures
gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    workspace_swipe = off
}

# Mouse tweaks
#device:epic mouse V1 {
    #sensitivity = -0.5
#}

# Window Rules - you can use *hyprctl clients* to check the names and
# classes of windows
windowrulev2 = noinitialfocus, class:(REAPER)
#windowrulev2 = nofocus, class:(REAPER)
windowrulev2 = noanim, class:(REAPER)
windowrulev2 = suppressevent maximize, class:(libreoffice)
windowrulev2 = bordercolor rgb(909094), xwayland:1    # check if window
                                                      # is xwayland
windowrulev2 = idleinhibit fullscreen, fullscreen:1   # Prevent sleeping
                                                      # when playing a
                                                      # game or watching
                                                      # video
                                                      # (fullscreen
                                                      # only)

# Key bindings
$mainMod = SUPER
$shiftMod = SUPERSHIFT
$controlMod = SUPERCONTROL
$controlshiftMod = SUPERCONTROLSHIFT

bind = $mainMod, Q, exec, kitty
bind = $mainMod, W, exec, firefox
bind = $mainMod, T, exec, thunderbird
bind = $mainMod, C, killactive, 
bind = $mainMod, E, exec, dolphin
bind = $mainMod, F, togglefloating, 
bind = $mainMod, R, exec, rofi -show drun -p "Run Menu"
bind = $mainMod, P, pseudo,                           # dwindle
bind = $mainMod, J, togglesplit,                      # dwindle
bind = $mainMod, V, exec, cliphist list | rofi -dmenu -p "Clipboard" -i | cliphist decode | wl-copy
bind = $mainMod, L, exec, ~/.config/swaylock/lock.sh
bind = $mainMod, Z, exec, emacs
bind = $mainMod, S, exec, qt6ct
bind = $mainMod, S, exec, nwg-look
bind = $mainMod, N, exec, nm-connection-editor

# Screen enable/disable (Left bracket - left screen only - Right
# bracket - left & right screen)
bind = $mainMod, bracketleft, exec, hyprctl keyword monitor "HDMI-A-1, disable"
bind = $mainMod, bracketright, exec, hyprctl keyword monitor "HDMI-A-1, preferred, auto, 1"

# Volume Keybinds
bind = , XF86AudioRaiseVolume, exec, amixer set Master 5%+
bind = , XF86AudioLowerVolume, exec, amixer set Master 5%-
bind = , XF86AudioMute, exec, amixer set Master toggle

# Brightness Keybinds
bind = , xf86MonBrightnessDown, exec, brightnessctl s 10%-
bind = , xf86MonBrightnessUp, exec, brightnessctl s +10%


# Screenshot with hyprshot and printscreen key Normal - active
# monitor, +Super - selectable monitor, +SuperShift - selectable
# window, +SuperControl - selectable area
bind = $mainMod, PRINT, exec, hyprshot -m output
bind = $controlMod, PRINT, exec, hyprshot -m region
bind = $shiftMod, PRINT, exec, hyprshot -m window
bind = , PRINT, exec, hyprshot -m active -m output

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
bind = $controlMod, 1, workspace, 11
bind = $controlMod, 2, workspace, 12
bind = $controlMod, 3, workspace, 13
bind = $controlMod, 4, workspace, 14
bind = $controlMod, 5, workspace, 15
bind = $controlMod, 6, workspace, 16
bind = $controlMod, 7, workspace, 17
bind = $controlMod, 8, workspace, 18
bind = $controlMod, 9, workspace, 19
bind = $controlMod, 0, workspace, 20

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $shiftMod, 1, movetoworkspacesilent, 1
bind = $shiftMod, 2, movetoworkspacesilent, 2
bind = $shiftMod, 3, movetoworkspacesilent, 3
bind = $shiftMod, 4, movetoworkspacesilent, 4
bind = $shiftMod, 5, movetoworkspacesilent, 5
bind = $shiftMod, 6, movetoworkspacesilent, 6
bind = $shiftMod, 7, movetoworkspacesilent, 7
bind = $shiftMod, 8, movetoworkspacesilent, 8
bind = $shiftMod, 9, movetoworkspacesilent, 9
bind = $shiftMod, 0, movetoworkspacesilent, 10
bind = $controlshiftMod, 1, movetoworkspacesilent, 11
bind = $controlshiftMod, 2, movetoworkspacesilent, 12
bind = $controlshiftMod, 3, movetoworkspacesilent, 13
bind = $controlshiftMod, 4, movetoworkspacesilent, 14
bind = $controlshiftMod, 5, movetoworkspacesilent, 15
bind = $controlshiftMod, 6, movetoworkspacesilent, 16
bind = $controlshiftMod, 7, movetoworkspacesilent, 17
bind = $controlshiftMod, 8, movetoworkspacesilent, 18
bind = $controlshiftMod, 9, movetoworkspacesilent, 19
bind = $controlshiftMod, 0, movetoworkspacesilent, 20
bind = $shiftMod, -, movetoworkspacesilent, special

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Resize/move windows with mainMod + RMB/LMB and dragging
bindm = $mainMod, mouse:273, resizewindow
bindm = $mainMod, mouse:272, movewindow
bindm = , mouse:277, movewindow
bindm = , mouse:276, movewindow
bindm = , mouse:275, resizewindow

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move windows with shiftMod cursors
bind = $shiftMod, left, layoutmsg, swapprev
bind = $shiftMod, right, layoutmsg, swapnext
bind = $shiftMod, up, layoutmsg, swapprev
bind = $shiftMod, down, layoutmsg, swapnext

# Resize windows with controlMod cursors
binde = $controlMod, left, resizeactive, -50 0
binde = $controlMod, right, resizeactive, 50 0 
binde = $controlMod, up, resizeactive, 0 -50 
binde = $controlMod, down, resizeactive, 0 50
